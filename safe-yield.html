<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Safe Yield ‚Äî Capital Preservation Vault | nexxore</title>
  <meta name="description" content="Capital preservation yield vault designed for DAOs, treasuries, and long-term allocators. Zero leverage, conservative yield.">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.ethers.io/lib/ethers-5.7.2.umd.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 100%);
      color: #e5e7eb;
      min-height: 100vh;
    }

    /* Header */
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px 48px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.08);
      background: rgba(255, 255, 255, 0.02);
      backdrop-filter: blur(10px);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 32px;
    }

    .logo {
      font-size: 1.5rem;
      font-weight: 700;
      background: linear-gradient(135deg, #00d4ff, #0099ff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-decoration: none;
    }

    .nav-links {
      display: flex;
      gap: 8px;
    }

    .nav-link {
      color: #9ca3af;
      text-decoration: none;
      padding: 8px 16px;
      border-radius: 8px;
      font-size: 0.9rem;
      transition: all 0.3s;
    }

    .nav-link:hover, .nav-link.active {
      color: #fff;
      background: rgba(255, 255, 255, 0.05);
    }

    .header-right {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .btn {
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      font-family: inherit;
      font-size: 0.9rem;
    }

    .btn-primary {
      background: linear-gradient(135deg, #00d4ff, #0099ff);
      color: white;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(0, 212, 255, 0.3);
    }

    .btn-primary.connected {
      background: linear-gradient(135deg, #22c55e, #16a34a);
    }

    /* Main Content */
    .main-content {
      max-width: 1400px;
      margin: 0 auto;
      padding: 40px 48px;
    }

    /* Vault Header */
    .vault-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 40px;
    }

    .vault-info {
      max-width: 600px;
    }

    .vault-badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: rgba(34, 197, 94, 0.1);
      border: 1px solid rgba(34, 197, 94, 0.3);
      color: #22c55e;
      padding: 6px 14px;
      border-radius: 20px;
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 16px;
    }

    .vault-badge.inactive {
      background: rgba(156, 163, 175, 0.1);
      border-color: rgba(156, 163, 175, 0.3);
      color: #9ca3af;
    }

    .vault-badge-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: currentColor;
    }

    .vault-title {
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 12px;
      background: linear-gradient(135deg, #fff, #9ca3af);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .vault-subtitle {
      font-size: 1.1rem;
      color: #9ca3af;
      line-height: 1.6;
    }

    .vault-status-card {
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 16px;
      padding: 24px 32px;
      min-width: 280px;
    }

    .status-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }

    .status-row:last-child {
      border-bottom: none;
    }

    .status-label {
      color: #9ca3af;
      font-size: 0.85rem;
    }

    .status-value {
      font-weight: 600;
      font-size: 0.95rem;
    }

    .status-value.low-risk {
      color: #22c55e;
    }

    .status-value.inactive {
      color: #9ca3af;
    }

    /* Metrics Grid */
    .metrics-grid {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 20px;
      margin-bottom: 40px;
    }

    .metric-card {
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 12px;
      padding: 24px;
      transition: all 0.3s;
    }

    .metric-card:hover {
      border-color: rgba(0, 212, 255, 0.3);
      background: rgba(255, 255, 255, 0.05);
    }

    .metric-label {
      color: #9ca3af;
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 8px;
    }

    .metric-value {
      font-size: 1.8rem;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .metric-subtext {
      font-size: 0.8rem;
      color: #6b7280;
    }

    /* Tabs */
    .tabs-container {
      margin-bottom: 32px;
    }

    .tabs {
      display: flex;
      gap: 8px;
      background: rgba(255, 255, 255, 0.03);
      padding: 6px;
      border-radius: 12px;
      width: fit-content;
    }

    .tab {
      padding: 12px 24px;
      border: none;
      background: transparent;
      color: #9ca3af;
      font-size: 0.9rem;
      font-weight: 500;
      cursor: pointer;
      border-radius: 8px;
      transition: all 0.3s;
      font-family: inherit;
    }

    .tab:hover {
      color: #fff;
    }

    .tab.active {
      background: rgba(0, 212, 255, 0.15);
      color: #00d4ff;
    }

    /* Tab Content */
    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    /* Inspect Tab */
    .strategies-grid {
      display: grid;
      gap: 20px;
    }

    .strategy-card {
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 16px;
      overflow: hidden;
      transition: all 0.3s;
    }

    .strategy-card:hover {
      border-color: rgba(0, 212, 255, 0.3);
    }

    .strategy-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 24px;
      cursor: pointer;
    }

    .strategy-main {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .strategy-icon {
      width: 48px;
      height: 48px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
    }

    .strategy-info h3 {
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .strategy-info p {
      color: #9ca3af;
      font-size: 0.85rem;
    }

    .strategy-metrics {
      display: flex;
      gap: 32px;
      align-items: center;
    }

    .strategy-metric {
      text-align: right;
    }

    .strategy-metric-label {
      color: #6b7280;
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .strategy-metric-value {
      font-size: 1.1rem;
      font-weight: 600;
    }

    .strategy-metric-value.green {
      color: #22c55e;
    }

    .expand-icon {
      color: #6b7280;
      transition: transform 0.3s;
    }

    .strategy-card.expanded .expand-icon {
      transform: rotate(180deg);
    }

    .strategy-details {
      display: none;
      padding: 0 24px 24px;
      border-top: 1px solid rgba(255, 255, 255, 0.05);
    }

    .strategy-card.expanded .strategy-details {
      display: block;
    }

    .detail-section {
      padding: 20px 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }

    .detail-section:last-child {
      border-bottom: none;
    }

    .detail-section h4 {
      font-size: 0.85rem;
      color: #9ca3af;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 12px;
    }

    .detail-section p {
      color: #d1d5db;
      line-height: 1.7;
      font-size: 0.95rem;
    }

    .risk-breakdown {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 16px;
      margin-top: 12px;
    }

    .risk-item {
      background: rgba(255, 255, 255, 0.03);
      padding: 16px;
      border-radius: 10px;
      text-align: center;
    }

    .risk-item-label {
      color: #6b7280;
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 8px;
    }

    .risk-item-value {
      font-size: 1.2rem;
      font-weight: 700;
    }

    .risk-low { color: #22c55e; }
    .risk-medium { color: #fbbf24; }
    .risk-high { color: #ef4444; }

    /* Simulate Tab */
    .simulate-container {
      display: grid;
      grid-template-columns: 400px 1fr;
      gap: 32px;
    }

    .simulate-inputs {
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 16px;
      padding: 32px;
    }

    .simulate-inputs h3 {
      font-size: 1.1rem;
      margin-bottom: 24px;
    }

    .input-group {
      margin-bottom: 24px;
    }

    .input-label {
      display: block;
      color: #9ca3af;
      font-size: 0.85rem;
      margin-bottom: 8px;
    }

    .input-field {
      width: 100%;
      padding: 14px 16px;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      color: #fff;
      font-size: 1rem;
      font-family: inherit;
      transition: all 0.3s;
    }

    .input-field:focus {
      outline: none;
      border-color: #00d4ff;
      background: rgba(0, 212, 255, 0.05);
    }

    .input-suffix {
      position: relative;
    }

    .input-suffix .input-field {
      padding-right: 60px;
    }

    .input-suffix span {
      position: absolute;
      right: 16px;
      top: 50%;
      transform: translateY(-50%);
      color: #6b7280;
      font-size: 0.9rem;
    }

    .simulate-btn {
      width: 100%;
      padding: 16px;
      background: linear-gradient(135deg, #00d4ff, #0099ff);
      border: none;
      border-radius: 10px;
      color: white;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      font-family: inherit;
    }

    .simulate-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(0, 212, 255, 0.3);
    }

    .simulate-disclaimer {
      margin-top: 20px;
      padding: 16px;
      background: rgba(251, 191, 36, 0.1);
      border: 1px solid rgba(251, 191, 36, 0.2);
      border-radius: 10px;
      font-size: 0.8rem;
      color: #fbbf24;
      line-height: 1.6;
    }

    .simulate-results {
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 16px;
      padding: 32px;
    }

    .simulate-results h3 {
      font-size: 1.1rem;
      margin-bottom: 24px;
    }

    .results-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      margin-bottom: 32px;
    }

    .result-card {
      background: rgba(255, 255, 255, 0.03);
      border-radius: 12px;
      padding: 20px;
    }

    .result-label {
      color: #6b7280;
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 8px;
    }

    .result-value {
      font-size: 1.5rem;
      font-weight: 700;
    }

    .result-range {
      font-size: 0.85rem;
      color: #9ca3af;
      margin-top: 4px;
    }

    .projection-chart {
      background: rgba(255, 255, 255, 0.02);
      border-radius: 12px;
      padding: 24px;
      height: 200px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #6b7280;
      font-size: 0.9rem;
    }

    /* Expand Tab */
    .expand-sections {
      display: grid;
      gap: 24px;
    }

    .expand-section {
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 16px;
      overflow: hidden;
    }

    .expand-section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 24px;
      cursor: pointer;
    }

    .expand-section-header h3 {
      font-size: 1.1rem;
      font-weight: 600;
    }

    .expand-section-content {
      display: none;
      padding: 0 24px 24px;
      border-top: 1px solid rgba(255, 255, 255, 0.05);
    }

    .expand-section.open .expand-section-content {
      display: block;
    }

    .formula-block {
      background: rgba(0, 0, 0, 0.3);
      border-radius: 10px;
      padding: 20px;
      margin: 16px 0;
      font-family: 'Courier New', monospace;
      font-size: 0.95rem;
      overflow-x: auto;
    }

    .agent-permissions {
      display: grid;
      gap: 16px;
      margin-top: 16px;
    }

    .agent-card {
      background: rgba(255, 255, 255, 0.02);
      border-radius: 10px;
      padding: 20px;
    }

    .agent-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }

    .agent-name {
      font-weight: 600;
      font-size: 1rem;
    }

    .agent-role {
      font-size: 0.75rem;
      padding: 4px 10px;
      border-radius: 6px;
      background: rgba(0, 212, 255, 0.1);
      color: #00d4ff;
    }

    .agent-permissions-list {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }

    .permission-allowed, .permission-denied {
      font-size: 0.85rem;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .permission-allowed {
      color: #22c55e;
    }

    .permission-denied {
      color: #ef4444;
    }

    .threshold-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 16px;
    }

    .threshold-table th,
    .threshold-table td {
      padding: 14px 16px;
      text-align: left;
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }

    .threshold-table th {
      color: #9ca3af;
      font-weight: 500;
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .threshold-table td {
      font-size: 0.95rem;
    }

    /* Responsive */
    @media (max-width: 1200px) {
      .metrics-grid {
        grid-template-columns: repeat(3, 1fr);
      }
      
      .simulate-container {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 768px) {
      .header {
        padding: 16px 24px;
      }
      
      .main-content {
        padding: 24px;
      }
      
      .vault-header {
        flex-direction: column;
        gap: 24px;
      }
      
      .metrics-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .risk-breakdown {
        grid-template-columns: repeat(2, 1fr);
      }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="header-left">
      <a href="/" class="logo">nexxore</a>
      <nav class="nav-links">
        <a href="research.html" class="nav-link">Research</a>
        <a href="safe-yield.html" class="nav-link active">Safe Yield</a>
      </nav>
    </div>
    <div class="header-right">
      <button id="connectWalletBtn" class="btn btn-primary">Connect Wallet</button>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Vault Header -->
    <div class="vault-header">
      <div class="vault-info">
        <div class="vault-badge inactive">
          <span class="vault-badge-dot"></span>
          Inactive ‚Äî Design Phase
        </div>
        <h1 class="vault-title">Safe Yield</h1>
        <p class="vault-subtitle">
          Capital preservation vault designed for DAOs, treasuries, and long-term allocators. 
          Zero leverage. Conservative yield. Transparent risk.
        </p>
      </div>
      <div class="vault-status-card">
        <div class="status-row">
          <span class="status-label">Vault Status</span>
          <span class="status-value inactive">Inactive</span>
        </div>
        <div class="status-row">
          <span class="status-label">Risk Level</span>
          <span class="status-value low-risk">Low</span>
        </div>
        <div class="status-row">
          <span class="status-label">Leverage</span>
          <span class="status-value">None</span>
        </div>
        <div class="status-row">
          <span class="status-label">Liquidation Risk</span>
          <span class="status-value low-risk">None</span>
        </div>
      </div>
    </div>

    <!-- Metrics Grid -->
    <div class="metrics-grid">
      <div class="metric-card">
        <div class="metric-label">Capital Deployed</div>
        <div class="metric-value">$0</div>
        <div class="metric-subtext">Vault inactive</div>
      </div>
      <div class="metric-card">
        <div class="metric-label">Current APY</div>
        <div class="metric-value">‚Äî</div>
        <div class="metric-subtext">Target: 3-6%</div>
      </div>
      <div class="metric-card">
        <div class="metric-label">Target Volatility</div>
        <div class="metric-value">&lt;2%</div>
        <div class="metric-subtext">NAV-based</div>
      </div>
      <div class="metric-card">
        <div class="metric-label">Vault Risk Score</div>
        <div class="metric-value" style="color: #22c55e;">0.12</div>
        <div class="metric-subtext">Very Low</div>
      </div>
      <div class="metric-card">
        <div class="metric-label">Execution Status</div>
        <div class="metric-value">Paused</div>
        <div class="metric-subtext">Design phase</div>
      </div>
    </div>

    <!-- Tabs -->
    <div class="tabs-container">
      <div class="tabs">
        <button class="tab active" data-tab="inspect">Inspect</button>
        <button class="tab" data-tab="simulate">Simulate</button>
        <button class="tab" data-tab="expand">Expand</button>
      </div>
    </div>

    <!-- Tab Content: Inspect -->
    <div class="tab-content active" id="inspect">
      <div class="strategies-grid">
        <!-- Strategy 1: Blue-Chip Lending -->
        <div class="strategy-card" data-strategy="lending">
          <div class="strategy-header">
            <div class="strategy-main">
              <div class="strategy-icon" style="background: linear-gradient(135deg, #3b82f6, #60a5fa);">üè¶</div>
              <div class="strategy-info">
                <h3>Blue-Chip Lending</h3>
                <p>Aave, Compound, Morpho</p>
              </div>
            </div>
            <div class="strategy-metrics">
              <div class="strategy-metric">
                <div class="strategy-metric-label">Allocation</div>
                <div class="strategy-metric-value">40‚Äì70%</div>
              </div>
              <div class="strategy-metric">
                <div class="strategy-metric-label">Risk Score</div>
                <div class="strategy-metric-value green">0.15</div>
              </div>
              <svg class="expand-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M6 9l6 6 6-6"/>
              </svg>
            </div>
          </div>
          <div class="strategy-details">
            <div class="detail-section">
              <h4>Why This Strategy Exists</h4>
              <p>Blue-chip lending protocols represent the most battle-tested DeFi infrastructure. Aave, Compound, and Morpho have collectively processed billions in loans with minimal security incidents. This strategy provides consistent yield through supplying stablecoins to these protocols.</p>
            </div>
            <div class="detail-section">
              <h4>What Can Go Wrong</h4>
              <p>Smart contract vulnerabilities, oracle manipulation, extreme market volatility causing utilization spikes, governance attacks, or protocol upgrades introducing bugs. Historical incidents include the Compound oracle issue (2020) and various flash loan exploits on forks.</p>
            </div>
            <div class="detail-section">
              <h4>System Response to Risk</h4>
              <p>If risk score exceeds 0.6, rebalancing freezes. Above 0.7, the strategy enters withdraw-only mode. Above 0.8, emergency unwind triggers automatically. Utilization monitoring alerts at 80%+ and forces gradual exit at 90%+.</p>
            </div>
            <div class="detail-section">
              <h4>Risk Score Breakdown</h4>
              <div class="risk-breakdown">
                <div class="risk-item">
                  <div class="risk-item-label">Protocol</div>
                  <div class="risk-item-value risk-low">0.10</div>
                </div>
                <div class="risk-item">
                  <div class="risk-item-label">Liquidity</div>
                  <div class="risk-item-value risk-low">0.12</div>
                </div>
                <div class="risk-item">
                  <div class="risk-item-label">Utilization</div>
                  <div class="risk-item-value risk-low">0.18</div>
                </div>
                <div class="risk-item">
                  <div class="risk-item-label">Governance</div>
                  <div class="risk-item-value risk-low">0.08</div>
                </div>
                <div class="risk-item">
                  <div class="risk-item-label">Oracle</div>
                  <div class="risk-item-value risk-low">0.05</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Strategy 2: Maker / sDAI -->
        <div class="strategy-card" data-strategy="sdai">
          <div class="strategy-header">
            <div class="strategy-main">
              <div class="strategy-icon" style="background: linear-gradient(135deg, #22c55e, #86efac);">üíé</div>
              <div class="strategy-info">
                <h3>Maker / sDAI</h3>
                <p>Sky Protocol DSR</p>
              </div>
            </div>
            <div class="strategy-metrics">
              <div class="strategy-metric">
                <div class="strategy-metric-label">Allocation</div>
                <div class="strategy-metric-value">20‚Äì40%</div>
              </div>
              <div class="strategy-metric">
                <div class="strategy-metric-label">Risk Score</div>
                <div class="strategy-metric-value green">0.08</div>
              </div>
              <svg class="expand-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M6 9l6 6 6-6"/>
              </svg>
            </div>
          </div>
          <div class="strategy-details">
            <div class="detail-section">
              <h4>Why This Strategy Exists</h4>
              <p>The DAI Savings Rate (DSR) via sDAI represents one of the safest yield sources in DeFi. It's backed by Maker's diverse collateral base and has been battle-tested since 2019. The yield comes from protocol revenue, not market speculation.</p>
            </div>
            <div class="detail-section">
              <h4>What Can Go Wrong</h4>
              <p>DAI de-peg events, Maker governance decisions reducing DSR to 0%, smart contract risk in the sDAI wrapper, or systemic risk from Maker's RWA (Real World Asset) collateral exposure.</p>
            </div>
            <div class="detail-section">
              <h4>System Response to Risk</h4>
              <p>DAI price monitoring triggers alerts at ¬±0.5% deviation. Automatic reduction begins at ¬±1% deviation. Full exit triggers at ¬±2% deviation. Governance vote monitoring for DSR changes with 24-hour advance notice.</p>
            </div>
            <div class="detail-section">
              <h4>Risk Score Breakdown</h4>
              <div class="risk-breakdown">
                <div class="risk-item">
                  <div class="risk-item-label">Protocol</div>
                  <div class="risk-item-value risk-low">0.05</div>
                </div>
                <div class="risk-item">
                  <div class="risk-item-label">Liquidity</div>
                  <div class="risk-item-value risk-low">0.08</div>
                </div>
                <div class="risk-item">
                  <div class="risk-item-label">Utilization</div>
                  <div class="risk-item-value risk-low">0.02</div>
                </div>
                <div class="risk-item">
                  <div class="risk-item-label">Governance</div>
                  <div class="risk-item-value risk-low">0.12</div>
                </div>
                <div class="risk-item">
                  <div class="risk-item-label">Oracle</div>
                  <div class="risk-item-value risk-low">0.03</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Strategy 3: Conservative Stable Loop -->
        <div class="strategy-card" data-strategy="stable-loop">
          <div class="strategy-header">
            <div class="strategy-main">
              <div class="strategy-icon" style="background: linear-gradient(135deg, #9333ea, #c084fc);">üîÑ</div>
              <div class="strategy-info">
                <h3>Conservative Stable Loop</h3>
                <p>Low-leverage stablecoin optimization</p>
              </div>
            </div>
            <div class="strategy-metrics">
              <div class="strategy-metric">
                <div class="strategy-metric-label">Allocation</div>
                <div class="strategy-metric-value">0‚Äì20%</div>
              </div>
              <div class="strategy-metric">
                <div class="strategy-metric-label">Risk Score</div>
                <div class="strategy-metric-value" style="color: #fbbf24;">0.32</div>
              </div>
              <svg class="expand-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M6 9l6 6 6-6"/>
              </svg>
            </div>
          </div>
          <div class="strategy-details">
            <div class="detail-section">
              <h4>Why This Strategy Exists</h4>
              <p>Provides yield enhancement by recursively supplying and borrowing stablecoins. Despite the name "loop," Safe Yield enforces strict LTV limits (max 40%) and only uses stablecoin pairs, eliminating liquidation risk from price volatility.</p>
            </div>
            <div class="detail-section">
              <h4>What Can Go Wrong</h4>
              <p>Stablecoin de-peg creating borrow/supply mismatch, interest rate spikes making the loop unprofitable or creating negative carry, protocol-level issues affecting either side of the position.</p>
            </div>
            <div class="detail-section">
              <h4>System Response to Risk</h4>
              <p>Automatic unwinding begins if supply APY drops below borrow APY for 24 hours. Hard stop if LTV exceeds 45% (5% safety buffer). Full exit on any stablecoin deviation >0.5%. This strategy is optional and may be disabled in v1.</p>
            </div>
            <div class="detail-section">
              <h4>Risk Score Breakdown</h4>
              <div class="risk-breakdown">
                <div class="risk-item">
                  <div class="risk-item-label">Protocol</div>
                  <div class="risk-item-value risk-low">0.15</div>
                </div>
                <div class="risk-item">
                  <div class="risk-item-label">Liquidity</div>
                  <div class="risk-item-value risk-medium">0.25</div>
                </div>
                <div class="risk-item">
                  <div class="risk-item-label">Utilization</div>
                  <div class="risk-item-value risk-medium">0.40</div>
                </div>
                <div class="risk-item">
                  <div class="risk-item-label">Governance</div>
                  <div class="risk-item-value risk-low">0.10</div>
                </div>
                <div class="risk-item">
                  <div class="risk-item-label">Oracle</div>
                  <div class="risk-item-value risk-low">0.08</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Strategy 4: Idle Optimization -->
        <div class="strategy-card" data-strategy="idle">
          <div class="strategy-header">
            <div class="strategy-main">
              <div class="strategy-icon" style="background: linear-gradient(135deg, #6b7280, #9ca3af);">üí§</div>
              <div class="strategy-info">
                <h3>Idle Optimization</h3>
                <p>Unallocated capital buffer</p>
              </div>
            </div>
            <div class="strategy-metrics">
              <div class="strategy-metric">
                <div class="strategy-metric-label">Allocation</div>
                <div class="strategy-metric-value">Remainder</div>
              </div>
              <div class="strategy-metric">
                <div class="strategy-metric-label">Risk Score</div>
                <div class="strategy-metric-value green">0.02</div>
              </div>
              <svg class="expand-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M6 9l6 6 6-6"/>
              </svg>
            </div>
          </div>
          <div class="strategy-details">
            <div class="detail-section">
              <h4>Why This Strategy Exists</h4>
              <p>Maintains liquidity buffer for withdrawals and emergency rebalancing. Capital held in vault contract or extremely liquid positions. Sacrifices yield for instant availability and minimal smart contract risk.</p>
            </div>
            <div class="detail-section">
              <h4>What Can Go Wrong</h4>
              <p>Opportunity cost from uninvested capital. In extreme scenarios, even holding stablecoins carries de-peg risk. Vault contract itself could have vulnerabilities.</p>
            </div>
            <div class="detail-section">
              <h4>System Response to Risk</h4>
              <p>This is the safest position. No active monitoring required. Capital is instantly available for withdrawals or reallocation to other strategies when conditions improve.</p>
            </div>
            <div class="detail-section">
              <h4>Risk Score Breakdown</h4>
              <div class="risk-breakdown">
                <div class="risk-item">
                  <div class="risk-item-label">Protocol</div>
                  <div class="risk-item-value risk-low">0.02</div>
                </div>
                <div class="risk-item">
                  <div class="risk-item-label">Liquidity</div>
                  <div class="risk-item-value risk-low">0.01</div>
                </div>
                <div class="risk-item">
                  <div class="risk-item-label">Utilization</div>
                  <div class="risk-item-value risk-low">0.00</div>
                </div>
                <div class="risk-item">
                  <div class="risk-item-label">Governance</div>
                  <div class="risk-item-value risk-low">0.01</div>
                </div>
                <div class="risk-item">
                  <div class="risk-item-label">Oracle</div>
                  <div class="risk-item-value risk-low">0.00</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Tab Content: Simulate -->
    <div class="tab-content" id="simulate">
      <div class="simulate-container">
        <div class="simulate-inputs">
          <h3>Projection Parameters</h3>
          <div class="input-group">
            <label class="input-label">Deposit Amount</label>
            <div class="input-suffix">
              <input type="number" class="input-field" id="simDepositAmount" placeholder="100000" value="100000">
              <span>USDC</span>
            </div>
          </div>
          <div class="input-group">
            <label class="input-label">Time Horizon</label>
            <div class="input-suffix">
              <input type="number" class="input-field" id="simTimeHorizon" placeholder="12" value="12">
              <span>months</span>
            </div>
          </div>
          <div class="input-group">
            <label class="input-label">Risk Tolerance</label>
            <select class="input-field" id="simRiskTolerance">
              <option value="conservative" selected>Conservative (Default)</option>
              <option value="moderate">Moderate</option>
            </select>
          </div>
          <button class="simulate-btn" onclick="runSimulation()">Run Simulation</button>
          <div class="simulate-disclaimer">
            ‚ö†Ô∏è <strong>Important:</strong> This simulation is for educational purposes only. It does not constitute financial advice and does not guarantee any returns. Actual results may vary significantly based on market conditions.
          </div>
        </div>
        <div class="simulate-results">
          <h3>Projected Outcomes</h3>
          <div class="results-grid" id="simResults">
            <div class="result-card">
              <div class="result-label">Expected APY</div>
              <div class="result-value" id="simExpectedApy">4.2%</div>
              <div class="result-range">Range: 2.8% ‚Äì 5.6%</div>
            </div>
            <div class="result-card">
              <div class="result-label">Projected Value</div>
              <div class="result-value" id="simProjectedValue">$104,200</div>
              <div class="result-range">After 12 months</div>
            </div>
            <div class="result-card">
              <div class="result-label">Worst-Case Drawdown</div>
              <div class="result-value" style="color: #fbbf24;" id="simDrawdown">-0.8%</div>
              <div class="result-range">Historical maximum</div>
            </div>
            <div class="result-card">
              <div class="result-label">Risk Score Trajectory</div>
              <div class="result-value" style="color: #22c55e;" id="simRiskTrajectory">Stable</div>
              <div class="result-range">0.10 ‚Üí 0.14 expected</div>
            </div>
          </div>
          <div class="projection-chart" id="projectionChart">
            üìä Projection chart will render here when vault is active
          </div>
        </div>
      </div>
    </div>

    <!-- Tab Content: Expand -->
    <div class="tab-content" id="expand">
      <div class="expand-sections">
        <!-- Risk Math Explanation -->
        <div class="expand-section open">
          <div class="expand-section-header" onclick="toggleExpandSection(this)">
            <h3>üìê Risk Math Explanation</h3>
            <svg class="expand-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M6 9l6 6 6-6"/>
            </svg>
          </div>
          <div class="expand-section-content">
            <p>Each protocol-strategy pair has a composite risk score calculated using five weighted dimensions:</p>
            <div class="formula-block">
RiskScore = w‚ÇÅ¬∑P·µ£ + w‚ÇÇ¬∑L·µ£ + w‚ÇÉ¬∑U·µ£ + w‚ÇÑ¬∑G·µ£ + w‚ÇÖ¬∑O·µ£

Where:
  P·µ£ = Protocol Risk (audit history, exploits, TVL stability)
  L·µ£ = Liquidity Risk (withdraw demand / available liquidity)
  U·µ£ = Utilization Risk (current / max safe utilization)
  G·µ£ = Governance Risk (active proposals, emergency votes)
  O·µ£ = Oracle Risk (deviations, paused feeds, delays)

Default weights: w‚ÇÅ=0.25, w‚ÇÇ=0.20, w‚ÇÉ=0.25, w‚ÇÑ=0.15, w‚ÇÖ=0.15
            </div>
            <p style="margin-top: 16px;">The vault-level risk is calculated as the weighted sum of all strategy risks:</p>
            <div class="formula-block">
VaultRisk = Œ£ (Allocation·µ¢ √ó RiskScore·µ¢)
            </div>
          </div>
        </div>

        <!-- Agent Permissions -->
        <div class="expand-section">
          <div class="expand-section-header" onclick="toggleExpandSection(this)">
            <h3>ü§ñ Agent Permissions & Governance</h3>
            <svg class="expand-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M6 9l6 6 6-6"/>
            </svg>
          </div>
          <div class="expand-section-content">
            <p>Safe Yield is agent-controlled but strictly agent-restricted. Each agent has explicit permissions:</p>
            <div class="agent-permissions">
              <div class="agent-card">
                <div class="agent-header">
                  <span class="agent-name">Research Agent</span>
                  <span class="agent-role">Advisory Only</span>
                </div>
                <div class="agent-permissions-list">
                  <div class="permission-allowed">‚úì Flag protocol changes</div>
                  <div class="permission-allowed">‚úì Read-only signals</div>
                  <div class="permission-denied">‚úó Cannot move funds</div>
                  <div class="permission-denied">‚úó Cannot change allocations</div>
                </div>
              </div>
              <div class="agent-card">
                <div class="agent-header">
                  <span class="agent-name">Risk Agent</span>
                  <span class="agent-role">Primary Authority</span>
                </div>
                <div class="agent-permissions-list">
                  <div class="permission-allowed">‚úì Pause deposits</div>
                  <div class="permission-allowed">‚úì Reduce exposure</div>
                  <div class="permission-allowed">‚úì Trigger emergency unwind</div>
                  <div class="permission-denied">‚úó Cannot increase risk</div>
                </div>
              </div>
              <div class="agent-card">
                <div class="agent-header">
                  <span class="agent-name">Execution Agent</span>
                  <span class="agent-role">Bounded Executor</span>
                </div>
                <div class="agent-permissions-list">
                  <div class="permission-allowed">‚úì Execute rebalances within bounds</div>
                  <div class="permission-allowed">‚úì Move funds between approved protocols</div>
                  <div class="permission-denied">‚úó Cannot exceed max allocation %</div>
                  <div class="permission-denied">‚úó Cannot add leverage or bridge assets</div>
                </div>
              </div>
              <div class="agent-card">
                <div class="agent-header">
                  <span class="agent-name">Governance</span>
                  <span class="agent-role">Time-locked Override</span>
                </div>
                <div class="agent-permissions-list">
                  <div class="permission-allowed">‚úì Add new protocols</div>
                  <div class="permission-allowed">‚úì Modify risk thresholds</div>
                  <div class="permission-allowed">‚úì Upgrade vault logic</div>
                  <div class="permission-denied">‚úó Must pass 48-hour timelock</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Hard Thresholds -->
        <div class="expand-section">
          <div class="expand-section-header" onclick="toggleExpandSection(this)">
            <h3>üö® Hard Risk Thresholds</h3>
            <svg class="expand-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M6 9l6 6 6-6"/>
            </svg>
          </div>
          <div class="expand-section-content">
            <p>These thresholds are enforced automatically with no discretionary overrides:</p>
            <table class="threshold-table">
              <thead>
                <tr>
                  <th>Condition</th>
                  <th>Trigger</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Elevated Risk</td>
                  <td>Risk &gt; 0.6</td>
                  <td style="color: #fbbf24;">Freeze rebalancing</td>
                </tr>
                <tr>
                  <td>High Risk</td>
                  <td>Risk &gt; 0.7</td>
                  <td style="color: #f97316;">Withdraw-only mode</td>
                </tr>
                <tr>
                  <td>Critical Risk</td>
                  <td>Risk &gt; 0.8</td>
                  <td style="color: #ef4444;">Emergency unwind</td>
                </tr>
                <tr>
                  <td>Utilization Spike</td>
                  <td>Utilization &gt; 90%</td>
                  <td style="color: #fbbf24;">Gradual exit begins</td>
                </tr>
                <tr>
                  <td>Stablecoin De-peg</td>
                  <td>¬±2% deviation</td>
                  <td style="color: #ef4444;">Full exit from asset</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- Rebalancing Rules -->
        <div class="expand-section">
          <div class="expand-section-header" onclick="toggleExpandSection(this)">
            <h3>‚öñÔ∏è Rebalancing Rules</h3>
            <svg class="expand-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M6 9l6 6 6-6"/>
            </svg>
          </div>
          <div class="expand-section-content">
            <table class="threshold-table">
              <thead>
                <tr>
                  <th>Parameter</th>
                  <th>Value</th>
                  <th>Rationale</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Rebalance Cooldown</td>
                  <td>7 days minimum</td>
                  <td>Prevents over-trading and reduces gas costs</td>
                </tr>
                <tr>
                  <td>Max Single Rebalance</td>
                  <td>15% of TVL</td>
                  <td>Prevents market impact and slippage</td>
                </tr>
                <tr>
                  <td>Emergency Override</td>
                  <td>No cooldown</td>
                  <td>Risk events bypass normal limits</td>
                </tr>
                <tr>
                  <td>Max Strategy Allocation</td>
                  <td>70%</td>
                  <td>Ensures diversification</td>
                </tr>
                <tr>
                  <td>Min Idle Buffer</td>
                  <td>5%</td>
                  <td>Liquidity for withdrawals</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- User Guarantees -->
        <div class="expand-section">
          <div class="expand-section-header" onclick="toggleExpandSection(this)">
            <h3>üìú User Guarantees (Explicit)</h3>
            <svg class="expand-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M6 9l6 6 6-6"/>
            </svg>
          </div>
          <div class="expand-section-content">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-top: 16px;">
              <div style="background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.2); border-radius: 12px; padding: 24px;">
                <h4 style="color: #ef4444; margin-bottom: 16px;">Safe Yield Does NOT Guarantee:</h4>
                <ul style="list-style: none; color: #f87171;">
                  <li style="padding: 8px 0; border-bottom: 1px solid rgba(255,255,255,0.05);">‚úó Fixed APY returns</li>
                  <li style="padding: 8px 0; border-bottom: 1px solid rgba(255,255,255,0.05);">‚úó Profit in all conditions</li>
                  <li style="padding: 8px 0; border-bottom: 1px solid rgba(255,255,255,0.05);">‚úó Zero smart contract risk</li>
                  <li style="padding: 8px 0;">‚úó Protection from systemic DeFi failure</li>
                </ul>
              </div>
              <div style="background: rgba(34, 197, 94, 0.1); border: 1px solid rgba(34, 197, 94, 0.2); border-radius: 12px; padding: 24px;">
                <h4 style="color: #22c55e; margin-bottom: 16px;">Safe Yield DOES Guarantee:</h4>
                <ul style="list-style: none; color: #86efac;">
                  <li style="padding: 8px 0; border-bottom: 1px solid rgba(255,255,255,0.05);">‚úì No leverage, ever</li>
                  <li style="padding: 8px 0; border-bottom: 1px solid rgba(255,255,255,0.05);">‚úì Conservative rebalancing only</li>
                  <li style="padding: 8px 0; border-bottom: 1px solid rgba(255,255,255,0.05);">‚úì Transparent risk reporting</li>
                  <li style="padding: 8px 0;">‚úì Deterministic emergency responses</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <script>
    // Tab switching
    document.querySelectorAll('.tab').forEach(tab => {
      tab.addEventListener('click', () => {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
        
        tab.classList.add('active');
        document.getElementById(tab.dataset.tab).classList.add('active');
      });
    });

    // Strategy card expansion
    document.querySelectorAll('.strategy-header').forEach(header => {
      header.addEventListener('click', () => {
        header.closest('.strategy-card').classList.toggle('expanded');
      });
    });

    // Expand section toggle
    function toggleExpandSection(header) {
      header.closest('.expand-section').classList.toggle('open');
    }

    // Simulation
    function runSimulation() {
      const amount = parseFloat(document.getElementById('simDepositAmount').value) || 100000;
      const months = parseInt(document.getElementById('simTimeHorizon').value) || 12;
      const risk = document.getElementById('simRiskTolerance').value;

      // Base APY range based on risk tolerance
      const baseApy = risk === 'conservative' ? 4.2 : 5.1;
      const apyRange = risk === 'conservative' ? [2.8, 5.6] : [3.5, 6.8];
      const drawdown = risk === 'conservative' ? -0.8 : -1.5;

      // Calculate projected value
      const projectedValue = amount * (1 + (baseApy / 100) * (months / 12));

      // Update UI
      document.getElementById('simExpectedApy').textContent = baseApy.toFixed(1) + '%';
      document.getElementById('simProjectedValue').textContent = '$' + projectedValue.toLocaleString(undefined, {maximumFractionDigits: 0});
      document.getElementById('simDrawdown').textContent = drawdown.toFixed(1) + '%';
      
      // Update range text
      document.querySelector('#simResults .result-card:nth-child(1) .result-range').textContent = 
        `Range: ${apyRange[0]}% ‚Äì ${apyRange[1]}%`;
      document.querySelector('#simResults .result-card:nth-child(2) .result-range').textContent = 
        `After ${months} months`;
    }

    // Wallet connection
    let userAddress = null;

    async function connectWallet() {
      try {
        if (!window.ethereum) {
          alert('MetaMask is not installed! Please install MetaMask from https://metamask.io/download/');
          return;
        }

        const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
        
        if (accounts && accounts.length > 0) {
          userAddress = accounts[0];
          const btn = document.getElementById('connectWalletBtn');
          btn.textContent = `${userAddress.slice(0, 6)}...${userAddress.slice(-4)}`;
          btn.classList.add('connected');
        }
      } catch (error) {
        console.error('Error connecting wallet:', error);
        alert('Failed to connect wallet: ' + error.message);
      }
    }

    document.getElementById('connectWalletBtn').addEventListener('click', connectWallet);

    // Handle account changes
    if (window.ethereum) {
      window.ethereum.on('accountsChanged', (accounts) => {
        if (accounts.length === 0) {
          userAddress = null;
          const btn = document.getElementById('connectWalletBtn');
          btn.textContent = 'Connect Wallet';
          btn.classList.remove('connected');
        } else {
          connectWallet();
        }
      });
    }
  </script>
</body>
</html>
